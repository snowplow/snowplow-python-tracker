language: python
dist: xenial
services:
  - redis
  - redis-server
python:
  - '2.7'
  - '3.5'
  - '3.6'
  - '3.7'
  - '3.8'
  - '3.9-dev'
install:
  - pip install -U pip setuptools virtualenv twine
  - pip install -r requirements-test.txt
  - pip install -e .
  - if [[ $TRAVIS_PYTHON_VERSION == 2.7 ]]; then pip install release-manager; fi
script: pytest --cov=snowplow_tracker
after_success: coveralls
deploy:
  skip_cleanup: true
  provider: script
  script: ./.travis/deploy.py
  on:
    tags: true
    python: '2.7'
env:
  global:
    secure: SnavmHqH0sB6xmyqSiN7HscdVpNr6pk+bWs/8Oin2FZ0Kp52V9vIQf1A9TjDQY67P3YgUsMFJKWmCIpbsWFUl65Nos2LXGK6oTe9mt7O5fsR6BsI1IiiZoC8wNZwmaUjqyJa3/Y5KUYvWXlTLYChbyiqxcTCtkBDnLaiFFDOEis=
